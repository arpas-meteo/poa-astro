---
import Layout from "../../layouts/main.astro";
import { IStazione } from "../../tipi/stazione.js";
import Poareacharts from "../../components/Poareacharts";

export async function getStaticPaths() {
  let url = "https://poa.alai.one/poa/anagrafica";
  url = "http://15.161.134.66:8000/poa/anagrafica";

  const response = await fetch(url);
  const stazioni = await response.json();

  const selezione = stazioni; // .splice(1, 10);

  return selezione.map((stazio: IStazione) => ({
    params: {
      cod_staz: stazio.COD_STAZ,
    },
    props: {
      stazio,
    },
  }));
}

const stazio = Astro.props.stazio as IStazione;
---

<Layout title={stazio.NOME}>
  <Poareacharts stazio={stazio} client:load />
</Layout>
