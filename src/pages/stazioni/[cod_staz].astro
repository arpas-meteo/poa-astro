---
import Layout from "../../layouts/main.astro";
import { IStazione } from "../../tipi/stazione.js";
import Poareacharts from "../../components/Poareacharts.js";

export async function getStaticPaths() {
  const response = await fetch("https://poa.alai.one/poa/anagrafica");
  const stazioni = await response.json();

  const selezione = stazioni; // .splice(1, 10);

  return selezione.map((stazio: IStazione) => ({
    params: {
      cod_staz: stazio.COD_STAZ,
    },
    props: {
      stazio,
    },
  }));
}

const stazio = Astro.props.stazio as IStazione;
---

<Layout title={stazio.NOME}>
  <Poareacharts stazio={stazio} />
</Layout>
